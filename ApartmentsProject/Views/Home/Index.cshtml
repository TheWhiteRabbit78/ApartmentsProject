@model IEnumerable<ApartmentsProject.Models.Apartment>

@{
    Layout = null;
    ViewData["Title"] = "Home Page";
}

<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResidenceZG - Luksuzni Stanovi u Zagrebu</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="~/css/site.css" rel="stylesheet">
</head>
<body>

    <!-- Navigacija -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold fs-4 text-uppercase" href="#"><span>Zoro</span> projekt</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link scroll-link" href="#home">Početna</a></li>
                    <li class="nav-item"><a class="nav-link scroll-link" href="#about">O Projektu</a></li>
                    <li class="nav-item"><a class="nav-link scroll-link" href="#apartments">Stanovi</a></li>
                    <li class="nav-item"><a class="nav-link scroll-link" href="#contact">Kontakt</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Sekcija -->
    <section id="home" class="hero-section">
        <img src="~/assets/images/hero.jpg" alt="Moderna zgrada s apartmanima" class="hero-image">
        <div class="container hero-content">
            <h1 class="display-4 fw-bold mb-3">Luksuzni Stanovi u Zagrebu</h1>
            <p class="fs-4 mb-4">Moderna stambena zgrada na premium lokaciji</p>
            <a href="#apartments" class="btn btn-light btn-lg px-4 py-2 fw-medium">Pogledaj stanove</a>
        </div>
    </section>

    <!-- O Projektu -->
    <section id="about" class="py-5 bg-light">
        <div class="container py-4">
            <h2 class="section-heading">O Projektu</h2>
            <div class="row align-items-center">
                <div class="col-md-6 mb-4 mb-md-0">
                    <img src="~/assets/images/building_side.jpg" alt="Detalji projekta" class="img-fluid rounded shadow">
                </div>
                <div class="col-md-6">
                    <h3 class="fs-2 fw-semibold mb-3">Moderna stambena zgrada</h3>
                    <p class="text-muted mb-3">Naš stambeni kompleks nudi visokokvalitetne stanove dizajnirane za moderan način života.</p>
                    <p class="text-muted mb-4">Svi stanovi opremljeni su najsuvremenijim materijalima i tehnologijama.</p>
                    <div class="row g-3 mt-2">
                        <div class="col-6"><div class="feature-card"><h4 class="fs-6 fw-semibold mb-1">Energetski učinkovito</h4><p class="small text-muted mb-0">A+ razred</p></div></div>
                        <div class="col-6"><div class="feature-card"><h4 class="fs-6 fw-semibold mb-1">Garaža</h4><p class="small text-muted mb-0">Parkirna mjesta</p></div></div>
                        <div class="col-6"><div class="feature-card"><h4 class="fs-6 fw-semibold mb-1">Lokacija</h4><p class="small text-muted mb-0">10 min do centra</p></div></div>
                        <div class="col-6"><div class="feature-card"><h4 class="fs-6 fw-semibold mb-1">Useljenje</h4><p class="small text-muted mb-0">Ljeto 2026.</p></div></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <!-- Stanovi -->
<section id="apartments" class="py-5">
    <div class="container py-4">
        <h2 class="section-heading">Dostupni Stanovi</h2>
        <div class="row g-4" id="apartments-container">
            @if (Model != null && Model.Any())
            {
                @foreach (var apartment in Model.Where(a => a.IsAvailable))
                {
                    <div class="col-md-6 col-lg-3">
                        <div class="apartment-card" data-bs-toggle="modal" data-bs-target="#apartmentModal@(apartment.Id)">
                            @if (!string.IsNullOrEmpty(apartment.MainImageUrl))
                            {
                                <img src="@apartment.MainImageUrl" alt="@apartment.Title" class="card-img-top">
                            }
                            else
                            {
                                <div class="placeholder-image card-img-top">
                                    <i class="fas fa-home fa-2x"></i>
                                </div>
                            }

                            <div class="card-body p-3">
                                <h3 class="fs-5 fw-semibold mb-1">@apartment.Title</h3>
                                <p class="small text-muted mb-1">@apartment.Rooms</p>
                                <p class="fw-medium mb-0">@apartment.FormattedPrice</p>
                            </div>
                        </div>
                    </div>

                    <!-- Modal for this specific apartment -->
                    <div class="modal fade" id="apartmentModal@(apartment.Id)" tabindex="-1" aria-hidden="true">
                        <div class="modal-dialog modal-lg modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <div>
                                        <h5 class="modal-title fs-4 fw-bold">@apartment.Title</h5>
                                        <p class="text-muted mb-0">@apartment.Rooms</p>
                                    </div>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    @if (apartment.HasImages)
                                    {
                                        <!-- Carousel gallery -->
                                        <div id="apartmentGallery@(apartment.Id)" class="carousel slide mb-4" data-bs-ride="carousel">
                                            <!-- Carousel indicators -->
                                            <div class="carousel-indicators">
                                                @for (int i = 0; i < apartment.AllImages.Count; i++)
                                                {
                                                    <button type="button" data-bs-target="#apartmentGallery@(apartment.Id)" 
                                                            data-bs-slide-to="@i" class="@(i == 0 ? "active" : "")"></button>
                                                }
                                            </div>
                                            
                                            <!-- Carousel slides -->
                                            <div class="carousel-inner rounded">
                                                @for (int i = 0; i < apartment.AllImages.Count; i++)
                                                {
                                                    var image = apartment.AllImages[i];
                                                    <div class="carousel-item @(i == 0 ? "active" : "")">
                                                        <img src="@image.Url" class="d-block w-100" alt="@image.Caption" 
                                                             style="height: 400px; object-fit: cover;">
                                                        @if (!string.IsNullOrEmpty(image.Caption))
                                                        {
                                                            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-2">
                                                                <small>@image.Type.ToUpper()</small>
                                                                <br><small>@image.Caption</small>
                                                            </div>
                                                        }
                                                    </div>
                                                }
                                            </div>
                                            
                                            <!-- Carousel controls -->
                                            <button class="carousel-control-prev" type="button" data-bs-target="#apartmentGallery@(apartment.Id)" data-bs-slide="prev">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Prethodna</span>
                                            </button>
                                            <button class="carousel-control-next" type="button" data-bs-target="#apartmentGallery@(apartment.Id)" data-bs-slide="next">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Sljedeća</span>
                                            </button>
                                        </div>

                                        <!-- Thumbnail gallery -->
                                        <div class="row g-2 mb-4">
                                            @{
                                                var colClass = apartment.AllImages.Count <= 4 ? $"col-{12 / apartment.AllImages.Count}" : "col-3";
                                            }
                                            @for (int i = 0; i < apartment.AllImages.Count; i++)
                                            {
                                                var image = apartment.AllImages[i];
                                                <div class="@colClass">
                                                    <img src="@image.Url" class="img-thumbnail w-100 cursor-pointer" 
                                                         style="height: 80px; object-fit: cover;" 
                                                         onclick="$('#apartmentGallery@(apartment.Id)').carousel(@i)"
                                                         alt="@image.Caption">
                                                </div>
                                            }
                                        </div>
                                    }
                                    else
                                    {
                                        <!-- No images placeholder -->
                                        <div class="text-center text-muted mb-4" style="height: 400px; display: flex; align-items: center; justify-content: center; background-color: #f8f9fa; border-radius: 8px;">
                                            <div>
                                                <i class="fas fa-image fa-3x mb-2"></i>
                                                <p>No images available</p>
                                            </div>
                                        </div>
                                    }

                                    <div class="mb-4">
                                        <h6 class="fw-semibold mb-2">Opis</h6>
                                        <p class="text-muted">@apartment.Description</p>
                                    </div>

                                    <div class="row mb-4">
                                        <div class="col-md-3 col-6 mb-3 mb-md-0">
                                            <div class="modal-detail">
                                                <p class="small text-muted mb-1">Cijena</p>
                                                <p class="fw-semibold mb-0">@apartment.FormattedPrice</p>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-3 mb-md-0">
                                            <div class="modal-detail">
                                                <p class="small text-muted mb-1">Veličina</p>
                                                <p class="fw-semibold mb-0">@(apartment.Title.Contains(" - ") ? apartment.Title.Split(" - ")[1] : "N/A")</p>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6">
                                            <div class="modal-detail">
                                                <p class="small text-muted mb-1">Status</p>
                                                <p class="fw-semibold mb-0">@apartment.Status</p>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6">
                                            <div class="modal-detail">
                                                <p class="small text-muted mb-1">Grijanje</p>
                                                <p class="fw-semibold mb-0">Podno</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer justify-content-center">
                                    <button type="button" class="btn btn-dark px-4 contact-button" 
                                            data-apartment-id="@apartment.Id" data-bs-dismiss="modal">
                                        Kontaktirajte nas za više informacija
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <div class="no-apartments-message">
                        <i class="fas fa-home fa-3x mb-3 text-muted"></i>
                        <h3 class="fs-4 fw-semibold mb-2">Trenutno nema dostupnih stanova</h3>
                        <p class="text-muted">Molimo provjerite kasnije ili nas kontaktirajte za više informacija.</p>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

    <!-- Rest of your sections remain the same -->
    <!-- Kontakt -->
    <section id="contact" class="py-5 bg-light">
        <div class="container py-4">
            <h2 class="section-heading">Kontaktirajte Nas</h2>
            <div class="row g-4">
                <div class="col-lg-5">
                    <div class="contact-card">
                        <h3 class="fs-4 fw-semibold mb-3">Pošaljite upit</h3>
                        <form id="contactForm">
                            @Html.AntiForgeryToken()
                            <input type="hidden" id="apartmentId" name="apartmentId" value="">
                            <input class="form-control mb-3" id="fullName" name="fullName" placeholder="Ime i prezime *" required>
                            <input type="email" class="form-control mb-3" id="email" name="email" placeholder="Email adresa *" required>
                            <input type="tel" class="form-control mb-3" id="phone" name="phone" placeholder="Telefon">
                            <textarea class="form-control mb-3" id="message" name="message" placeholder="Vaša poruka... *" rows="4" required></textarea>
                            <button type="submit" class="btn btn-dark w-100 py-2" id="submitBtn">
                                <span class="submit-text">Pošalji upit</span>
                                <span class="submit-loading d-none">
                                    <span class="spinner-border spinner-border-sm me-2"></span>
                                    Šalje...
                                </span>
                            </button>
                        </form>
                        <div id="contactMessage" class="mt-3"></div>
                    </div>
                </div>
                <div class="col-lg-7">
                    <img src="~/assets/images/location.jpg" alt="Lokacija zgrade" class="img-fluid rounded mb-4">
                    <div class="row g-3">
                        <div class="col-md-4"><div class="contact-info-card"><i class="fas fa-phone"></i><div><h4 class="fs-6 fw-medium mb-1">Telefon</h4><p class="small text-muted mb-0">+385 1 234 5678</p></div></div></div>
                        <div class="col-md-4"><div class="contact-info-card"><i class="fas fa-envelope"></i><div><h4 class="fs-6 fw-medium mb-1">Email</h4><p class="small text-muted mb-0">info@residencezg.hr</p></div></div></div>
                        <div class="col-md-4"><div class="contact-info-card"><i class="fas fa-map-marker-alt"></i><div><h4 class="fs-6 fw-medium mb-1">Adresa</h4><p class="small text-muted mb-0">Ilica 123, Zagreb</p></div></div></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container text-center">
            <p class="text-muted small mb-0">&copy; <span id="currentYear"></span> ResidenceZG. Sva prava pridržana.</p>
        </div>
    </footer>

    <!-- Modal za detalje stana -->
    <div class="modal fade" id="apartmentModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <div>
                        <h5 class="modal-title fs-4 fw-bold" id="modalTitle"></h5>
                        <p class="text-muted mb-0" id="modalRooms"></p>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Carousel galerija slika -->
                    <div id="apartmentGallery" class="carousel slide mb-4" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#apartmentGallery" data-bs-slide-to="0" class="active"></button>
                            <button type="button" data-bs-target="#apartmentGallery" data-bs-slide-to="1"></button>
                            <button type="button" data-bs-target="#apartmentGallery" data-bs-slide-to="2"></button>
                            <button type="button" data-bs-target="#apartmentGallery" data-bs-slide-to="3"></button>
                        </div>
                        <div class="carousel-inner rounded">
                            <div class="carousel-item active">
                                <img id="modalMainImage" src="" class="d-block w-100" alt="Slika stana" style="height: 400px; object-fit: cover;">
                                <div id="modalMainPlaceholder" class="d-block w-100 placeholder-image" style="height: 400px; display: none;">
                                    <i class="fas fa-home fa-3x"></i>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img id="modalFloorplanImage" src="" class="d-block w-100" alt="Tlocrt stana" style="height: 400px; object-fit: cover;">
                                <div id="modalFloorplanPlaceholder" class="d-block w-100 placeholder-image" style="height: 400px; display: none;">
                                    <i class="fas fa-drafting-compass fa-3x"></i>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img id="modalInteriorImage1" src="" class="d-block w-100" alt="Interijer stana" style="height: 400px; object-fit: cover;">
                                <div id="modalInterior1Placeholder" class="d-block w-100 placeholder-image" style="height: 400px; display: none;">
                                    <i class="fas fa-couch fa-3x"></i>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img id="modalInteriorImage2" src="" class="d-block w-100" alt="Interijer stana" style="height: 400px; object-fit: cover;">
                                <div id="modalInterior2Placeholder" class="d-block w-100 placeholder-image" style="height: 400px; display: none;">
                                    <i class="fas fa-bed fa-3x"></i>
                                </div>
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#apartmentGallery" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Prethodna</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#apartmentGallery" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Sljedeća</span>
                        </button>
                    </div>

                    <!-- Thumbnail galerija -->
                    <div class="row g-2 mb-4">
                        <div class="col-3">
                            <img id="thumbMainImage" src="" class="img-thumbnail w-100 cursor-pointer" style="height: 80px; object-fit: cover;"
                                 onclick="$('#apartmentGallery').carousel(0)">
                            <div id="thumbMainPlaceholder" class="img-thumbnail w-100 cursor-pointer placeholder-image" style="height: 80px; display: none;"
                                 onclick="$('#apartmentGallery').carousel(0)">
                                <i class="fas fa-home"></i>
                            </div>
                        </div>
                        <div class="col-3">
                            <img id="thumbFloorplanImage" src="" class="img-thumbnail w-100 cursor-pointer" style="height: 80px; object-fit: cover;"
                                 onclick="$('#apartmentGallery').carousel(1)">
                            <div id="thumbFloorplanPlaceholder" class="img-thumbnail w-100 cursor-pointer placeholder-image" style="height: 80px; display: none;"
                                 onclick="$('#apartmentGallery').carousel(1)">
                                <i class="fas fa-drafting-compass"></i>
                            </div>
                        </div>
                        <div class="col-3">
                            <img id="thumbInteriorImage1" src="" class="img-thumbnail w-100 cursor-pointer" style="height: 80px; object-fit: cover;"
                                 onclick="$('#apartmentGallery').carousel(2)">
                            <div id="thumbInterior1Placeholder" class="img-thumbnail w-100 cursor-pointer placeholder-image" style="height: 80px; display: none;"
                                 onclick="$('#apartmentGallery').carousel(2)">
                                <i class="fas fa-couch"></i>
                            </div>
                        </div>
                        <div class="col-3">
                            <img id="thumbInteriorImage2" src="" class="img-thumbnail w-100 cursor-pointer" style="height: 80px; object-fit: cover;"
                                 onclick="$('#apartmentGallery').carousel(3)">
                            <div id="thumbInterior2Placeholder" class="img-thumbnail w-100 cursor-pointer placeholder-image" style="height: 80px; display: none;"
                                 onclick="$('#apartmentGallery').carousel(3)">
                                <i class="fas fa-bed"></i>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h6 class="fw-semibold mb-2">Opis</h6>
                        <p class="text-muted" id="modalDescription"></p>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-3 col-6 mb-3 mb-md-0">
                            <div class="modal-detail">
                                <p class="small text-muted mb-1">Cijena</p>
                                <p class="fw-semibold mb-0" id="modalPrice"></p>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-3 mb-md-0">
                            <div class="modal-detail">
                                <p class="small text-muted mb-1">Veličina</p>
                                <p class="fw-semibold mb-0" id="modalSize"></p>
                            </div>
                        </div>
                        <div class="col-md-3 col-6">
                            <div class="modal-detail">
                                <p class="small text-muted mb-1">Status</p>
                                <p class="fw-semibold mb-0" id="modalStatus"></p>
                            </div>
                        </div>
                        <div class="col-md-3 col-6">
                            <div class="modal-detail">
                                <p class="small text-muted mb-1">Grijanje</p>
                                <p class="fw-semibold mb-0">Podno</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-dark px-4" id="contactButton" data-bs-dismiss="modal">
                        Kontaktirajte nas za više informacija
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery i Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="~/js/site.js"></script>

</body>
</html>